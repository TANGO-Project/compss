== README FILE FOR NMMB Application ==

=== DEPLOYMENT ===
- The folder structure of the target deployment must be:
   .
   |-DATA
   |---INITIAL
   |---STATIC
   |-----co2data
   |-----fix
   |-----geodata
   |-----GTOPO30
   |-----wrftables
   |-JOB
   |-MODEL
   |---exe
   |---libs
   |---NAMELISTS
   |---SRC
   |---SRC_LIBS
   |-OUTPUT
   |---CURRENT_RUN
   |---GLOB
   |-----output
   |---output
   |-POSTPROC
   |-PREPROC
   |---FIXED
   |-----include
   |-----lookup_tables
   |---VARIABLE
   |-----include
   |---view-fcst
   |-nmmb.jar
   |-README

	WARN: The JOB folder will be replaced with the deployment files
	WARN: The PREPROC folder will be replaced with the deployment files
	WARN: The POSTPROC folder will be replaced with the deployment files
	WARN: The nmmb.jar will be replaced with the deployment files

- The NMMB libraries must be compiled in the target machine
	- MODEL/SRC_LIBS compiled
	- Module dependencies
		module load COMPSs/trunk
  		module load NETCDF/3.6.3
		module load NCO

- The NEMS.x executable must be compiled in the target machine
	- MODEL/SRC: make nmm

=== EXECUTION ===
- The execution is prepared on the enqueue_nmmb.sh script

- The execution parameters can be set on the following file:
	JOB/nmmb_compss.properties

- The machine needs the following ENV variables on the .BASHRC file

  	export PATH=$PATH:/gpfs/projects/bsc19/bsc19533/NMMB-BSC/nmmb-bsc-ctm-v2.0/MODEL/exe
  	export UMO_PATH=/gpfs/projects/bsc19/bsc19533/NMMB-BSC/nmmb-bsc-ctm-v2.0
  	export FIX=$UMO_PATH/PREPROC/FIXED
  	export VRB=$UMO_PATH/PREPROC/VARIABLE
  	export OUTPUT=$UMO_PATH/PREPROC/output
  	export UMO_ROOT=$UMO_PATH/JOB
  	export SRCDIR=$UMO_PATH/MODEL
  	export UMO_OUT=$UMO_PATH/OUTPUT/CURRENT_RUN
  	export POST_CARBONO=$UMO_PATH/POSTPROC
  	export GRB=$UMO_PATH/DATA/INITIAL
  	export DATMOD=$UMO_PATH/DATA/STATIC
  	export CHEMIC=
  	export STE=
  	export OUTNMMB=$UMO_PATH/OUTPUT
  	export OUTGCHEM=
  	export PREMEGAN=
  	export TMP=/tmp
  	
  	export FNL=$GRB
  	export GFS=$GRB

- The application has some hardcoded environment variables because they cannot be loaded
	NNMBEnvironment.java --> *_ITF

